{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}
Visit - Home
{% endblock %}


{% block content %}

<br><br><br><br><br><br>

<body>
	<div class="container">
		<div class="row">
			<div id='script-warning'>
				Error getting data from <code>source</code> endpoint.
			</div>
			<div id='loading'>loading...</div>
			<div id='calendar'></div>
		</div>
		<div class="row">
			<div class="card">
				<div class="card-body">
				  This is some text within a card body.
				</div>
			  </div>
		</div>
		<br><br>
		<div class="row">
			<h2 class="text-center">Today's Appointments</h2><br>
			<div class="col-xs-12 col-md-12 col-lg-12" style="padding: 0%;">
				<table class="table">
				  <thead>
					<tr>
					  <th>Time</th>
					  <th>Email</th>
					  <th>First Name</th>
					  <th>Last Name</th>
					  <th>Department</th>
					  <th>Status</th>
					  <th>Description</th>
					</tr>
				  </thead>
				  <tbody>
					{% for appointment in appointments|sort(attribute='datetime') %}
					<tr>
					  <td>{{ appointment.datetime.strftime("%I:%M %p") }}</td>
					  <td>{{ appointment.email }}</td>
					  <td>{{ appointment.first_name }}</td>
					  <td>{{ appointment.last_name }}</td>
					  <td>{{ appointment.department }}</td>
					  <td>{% if appointment.check_in_state == 0 %} 
						<button type="button" class="btn btn-light">Not Checked In</button>
						{% elif appointment.check_in_state == 1 %}		
						<button type="button" class="btn btn-warning">Checked In</button>
						{% else %}
						<button type="button" class="btn btn-success">Checked Out</button>
						{% endif %}</td>
					  <td>{{ appointment.description }}</td>
					  <td><button type="button" class="btn btn-danger" style="font-size:12px" data-toggle="modal" data-target="#myModal">Cancel</button></td>
					</tr>
					<div class="modal fade" id="myModal" role="dialog">
						<div class="modal-dialog">
						
						  <!-- Modal content-->
						  <div class="modal-content">
							<div class="modal-header">
							  <button type="button" class="close" data-dismiss="modal">&times;</button>
							  <h4 class="modal-title">Warning</h4>
							</div>
							<div class="modal-body">
							  <p>Are you sure you want to cancel this appointment?</p>
							  <a class="btn btn-danger" href="{{ url_for('auth.cancel',appointment_id=appointment.id) }}">Yes, Cancel</a>
							</div>
						  </div>
						  
						</div>
					  </div>
					{% endfor %}
				  </tbody>
				</table>
			  </div>
		</div>


	</div>

</body>
<!-- </div>/.container -->
{% endblock %}